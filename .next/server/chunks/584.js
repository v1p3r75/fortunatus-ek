"use strict";exports.id=584,exports.ids=[584],exports.modules={11584:(e,t,r)=>{r.r(t),r.d(t,{default:()=>view_counter});var s=r(37985),o=r(29e3),i=r(54254),n=r(5598),a=r(16868),u=r(74350);let c="/api/views",getPostViews=async e=>{let t=await fetch(c+`?slug=${e}`);if(!t.ok)throw Error("An error occurred while fetching the data.");return t.json()},updatePostViews=async e=>{let t=await fetch(c+`?slug=${e}`,{method:"POST"});if(!t.ok)throw Error("An error occurred while posting the data.");return t.json()},use_post_views=(e,t)=>{let{data:r,error:s,mutate:o}=(0,u.ZP)([c,e],()=>getPostViews(e),{dedupingInterval:6e4,...t});return{views:r,isLoading:!s&&!r,isError:!!s,increment:()=>{o(updatePostViews(e))}}},view_counter=({slug:e,shouldIncrement:t=!1})=>{let r=(0,o.useTranslations)("common"),{views:u,isLoading:c,isError:d,increment:w}=use_post_views(e);return(0,i.useEffect)(()=>{t&&w()},[]),s.jsx("span",{children:r.rich("postViews",{count:()=>d||c?s.jsx(n.Z,{}):s.jsx(a.Z,{stat:u})})})}}};